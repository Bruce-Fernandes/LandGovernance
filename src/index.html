<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Land Registration System using Blockchain</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
  </head>

  <body align="center">
    <div class="container" style="width: 650px;">

      <div class="row">

        <div class="col-lg-12">
          <h1 class="text-center">Land Registration</h1>
          <hr/>
          <br/>
          <center>
            <button type="button" onClick="App.enableRegisterUser();" class="btn btn-primary"> Register User </button>

            <button type="button" onClick="App.enableRegisterProperty();" class="btn btn-primary"> Register Land </button>

            <button type="button" onClick="App.enableTransferProperty();" class="btn btn-primary"> Transfer Land </button>

            <button type="button" onClick="App.enableSearchProperty();" class="btn btn-primary"> Search Land </button>
          </center>
        </div>

        <div id="registerUserForm">
          <form id="rUForm">
            <table class="table">
              <tbody id="rU">
              
              </tbody>
            </table>
          </form>
        </div>

        <div id="registerPropertyForm">
          <form id="rPForm">
            <table class="table">
              <tbody id="rP">
              
              </tbody>
            </table>
          </form>
        </div>

        <div id="transferPropertyForm" >
          <form id="tPForm">
            <table class="table">
              <tbody id="tP">
              
              </tbody>
            </table>
          </form>
        </div>

        <div id="displayProperty">
            <table align="center">
              <tbody id="dP">
              
              </tbody>
            </table>
          <table class="table">
            <tbody id="out">
              
            </tbody>
          </table>
          <table class="table" id="out2">
            
          </table>
        </div>

      </div>

      <p id="accountAddress" class="text-center"></p>

    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/web3.min.js"></script>
    <script src="js/truffle-contract.js"></script>
    <script src="js/app.js"></script>
    <script>
      window.addEventListener('load', async () => {
        if (window.ethereum) {
          window.web3 = new Web3(ethereum);
          try {
            await ethereum.request({ method: 'eth_requestAccounts' });
    
            const accounts = await web3.eth.getAccounts();
            document.getElementById('accountAddress').innerText = "Connected Account: " + accounts[0];
            
            console.log('Connected account:', accounts[0]);
          } catch (error) {
            console.error("User denied account access or error occurred:", error);
          }
        }
       
        else if (window.web3) {
          window.web3 = new Web3(web3.currentProvider);
        }
      
        else {
          alert('Non-Ethereum browser detected. You should consider trying MetaMask!');
        }
      });
    </script>


  </body>
</html>